<div *ngIf="isLoading" class="loading">
  <mat-spinner></mat-spinner>
</div>

<div *ngIf="!isLoading" class="project-detail">
  <form [formGroup]="projectForm" (ngSubmit)="saveProject()">
    <div>
      <mat-form-field style="padding: 10px" appearance="fill">
        <mat-label>Project Name</mat-label>
        <input matInput formControlName="name" />
        <mat-error *ngIf="projectForm.get('name')?.hasError('required')">
          Name is required
        </mat-error>
      </mat-form-field>

      <mat-form-field style="padding: 10px" appearance="fill">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="description"></textarea>
      </mat-form-field>

      <mat-form-field style="padding: 10px" appearance="fill">
        <mat-label>Address</mat-label>
        <input matInput formControlName="address" />
        <mat-error *ngIf="projectForm.get('address')?.hasError('required')">
          Address is required
        </mat-error>
      </mat-form-field>
    </div>

    <div>
      <mat-form-field style="padding: 10px" appearance="fill">
        <mat-label>Start Date</mat-label>
        <input
          matInput
          [matDatepicker]="startPicker"
          formControlName="started_at"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="startPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #startPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field style="padding: 10px" appearance="fill">
        <mat-label>Finish Date</mat-label>
        <input
          matInput
          [matDatepicker]="finishPicker"
          formControlName="finished_at"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="finishPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #finishPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field style="padding: 10px" appearance="fill">
        <mat-label>Status</mat-label>
        <mat-select formControlName="status">
          <mat-option value="Off Plan">Off Plan</mat-option>
          <mat-option value="Under Construction">Under Construction</mat-option>
          <mat-option value="Finished">Finished</mat-option>
          <mat-option value="Sold">Sold</mat-option>
        </mat-select>
        <mat-error *ngIf="projectForm.get('status')?.hasError('required')">
          Status is required
        </mat-error>
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="projectForm.invalid"
      >
        Save Changes
      </button>
    </div>
  </form>
</div>
